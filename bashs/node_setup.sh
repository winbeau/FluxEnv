#!/usr/bin/env bash

set -e

echo "==========================================================="
echo "ğŸ”§ é˜¶æ®µ 1ï¼šæ›´æ–°ç³»ç»Ÿ"
echo "==========================================================="
sudo apt update && sudo apt upgrade -y
echo "âœ” ç³»ç»Ÿæ›´æ–°å®Œæˆ"
echo ""

echo "==========================================================="
echo "ğŸ”§ é˜¶æ®µ 2ï¼šå®‰è£…åŸºç¡€å·¥å…·ï¼ˆcurlã€gitï¼‰"
echo "==========================================================="
sudo apt install -y curl git
echo "âœ” åŸºç¡€å·¥å…·å®‰è£…å®Œæˆ"
echo ""

echo "==========================================================="
echo "ğŸ”§ é˜¶æ®µ 3ï¼šå®‰è£… Node.jsï¼ˆNodeSource - æ¨èï¼‰"
echo "==========================================================="
curl -fsSL https://deb.nodesource.com/setup_20.x | sudo -E bash -
sudo apt install -y nodejs
echo "âœ” Node.js å®‰è£…å®Œæˆ"
node -v
npm -v
echo ""

echo "==========================================================="
echo "ğŸ”§ é˜¶æ®µ 4ï¼šå®‰è£… pnpmï¼ˆæ›´å¿«çš„åŒ…ç®¡ç†å™¨ï¼‰"
echo "==========================================================="
curl -fsSL https://get.pnpm.io/install.sh | sh -
export PATH="$HOME/.local/share/pnpm:$PATH"
source ~/.bashrc 2>/dev/null || true
source ~/.zshrc  2>/dev/null || true
echo "âœ” pnpm å®‰è£…å®Œæˆ"
pnpm -v
echo ""

echo "==========================================================="
echo "ğŸ”§ é˜¶æ®µ 5ï¼šå®‰è£… Vue CLIï¼ˆå¯é€‰ï¼Œä½†å¸¸ç”¨ï¼‰"
echo "==========================================================="
sudo npm install -g @vue/cli
echo "âœ” Vue CLI å®‰è£…å®Œæˆ"
vue --version
echo ""

echo "==========================================================="
echo "ğŸ”§ é˜¶æ®µ 6ï¼šå®‰è£… Viteï¼ˆç°ä»£æ„å»ºå·¥å…·ï¼‰"
echo "==========================================================="
sudo npm install -g vite
echo "âœ” Vite å®‰è£…å®Œæˆ"
vite --version || true
echo ""

echo "==========================================================="
echo "ğŸ‰ å…¨éƒ¨å®‰è£…å®Œæˆï¼"
echo "==========================================================="
echo "ä½ ç°åœ¨å¯ä»¥åˆ›å»º Vue é¡¹ç›®ï¼š"
echo "  1) ä½¿ç”¨ Vue CLIï¼š vue create my-app"
echo "  2) ä½¿ç”¨ Viteï¼š pnpm create vite my-app --template vue"
echo "==========================================================="

